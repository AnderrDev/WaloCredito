<div class="flex items-center justify-center min-h-screen bg-blue-900">
  <div class="max-w-lg mx-auto p-6 bg-white shadow-lg rounded-lg mt-10">
    <h2 class="text-xl font-semibold mb-4 text-center">Paso {{ currentStep }} de 4</h2>

    <!-- Mensaje de error -->
    <p *ngIf="errorMessage" class="text-red-500 text-sm text-center">{{ errorMessage }}</p>

    <!-- Spinner de carga -->
    <div *ngIf="loading" class="text-blue-500 text-center font-bold animate-pulse">Procesando...</div>

    <!-- Formulario dinámico -->
    <form [formGroup]="currentForm" class="space-y-4">
      
      <!-- Paso 1: Información de Documento -->
      <ng-container *ngIf="currentStep === 1">
        <h3 class="text-lg font-medium mb-3">Información de Documento</h3>
        <select formControlName="documentType" class="w-full border p-2 rounded bg-gray-100">
          <option value="" disabled selected>Seleccione un tipo de documento</option>
          <option value="DNI">DNI</option>
          <option value="Pasaporte">Pasaporte</option>
        </select>
        <input type="text" formControlName="documentNumber" placeholder="Número de documento" class="w-full border p-2 rounded bg-gray-100">
        <label class="flex items-center">
          <input type="checkbox" formControlName="termsAccepted" class="mr-2"> Acepto los términos
        </label>
        <label class="flex items-center">
          <input type="checkbox" formControlName="consultAccepted" class="mr-2"> Acepto la consulta
        </label>
      </ng-container>

      <!-- Paso 2: Datos Personales -->
      <ng-container *ngIf="currentStep === 2">
        <h3 class="text-lg font-medium mb-3">Datos Personales</h3>
        <input type="text" formControlName="firstName" placeholder="Nombre" class="w-full border p-2 rounded bg-gray-100">
        <input type="text" formControlName="surName" placeholder="Apellido" class="w-full border p-2 rounded bg-gray-100">
        <input type="date" formControlName="expeditionDate" class="w-full border p-2 rounded bg-gray-100">
        <select formControlName="sex" class="w-full border p-2 rounded bg-gray-100">
          <option value="" disabled selected>Seleccione su sexo</option>
          <option value="M">Masculino</option>
          <option value="F">Femenino</option>
        </select>
        <input type="email" formControlName="email" placeholder="Correo electrónico" class="w-full border p-2 rounded bg-gray-100">
      </ng-container>

      <!-- Paso 3: Seguridad -->
      <ng-container *ngIf="currentStep === 3">
        <h3 class="text-lg font-medium mb-3">Seguridad</h3>
        <input type="text" formControlName="phoneNumber" placeholder="Teléfono" class="w-full border p-2 rounded bg-gray-100">
        <input type="password" formControlName="pin" placeholder="PIN (4 dígitos)" class="w-full border p-2 rounded bg-gray-100">
        <input type="password" formControlName="confirmPin" placeholder="Confirmar PIN" class="w-full border p-2 rounded bg-gray-100">
      </ng-container>

      <!-- Paso 4: Confirmación OTP -->
      <ng-container *ngIf="currentStep === 4">
        <h3 class="text-lg font-medium mb-3">Confirmación OTP</h3>
        <input type="text" formControlName="otp" placeholder="Código OTP" class="w-full border p-2 rounded bg-gray-100">
      </ng-container>
    </form>

    <!-- Botones de navegación -->
    <div class="flex justify-between mt-6">
      <button *ngIf="currentStep > 1" (click)="prevStep()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Anterior</button>
      <button *ngIf="currentStep < 4" (click)="nextStep()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Siguiente</button>
      <button *ngIf="currentStep === 4" (click)="submit()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Finalizar Registro</button>
    </div>
  </div>
</div>
